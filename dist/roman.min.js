export default(()=>{const e={I:1,V:5,X:10,L:50,C:100,D:500,M:1e3};let r={},t=()=>new RegExp("\\b(["+Object.keys(e).join("")+"]+)\\b","gi"),l=()=>new RegExp("^(["+Object.keys(e).join("")+"]+)$","gi"),n=e=>Array.isArray(e),u=e=>"string"==typeof e&&0!==e.length,a=e=>"string"==typeof e&&0!==e.length&&l().test(e);return r.numerals=(()=>e),r.read=(r=>{let t,l;return a(r)?(r=r.trim(),0<=r.indexOf(" ")&&(r=r.split(" ")[0]),l=r.toUpperCase().split("").reverse().reduce((r,l)=>{let n=e[l];return"number"==typeof n&&(r+=n*(void 0!==t&&n<t?-1:1),t=n),r},0),0!==l?l:null):null}),r.write=(r=>{const t=Object.keys(e);let l,n,u="",a=(r,l)=>{let n,u="",i=l;if(l<1e3&&4*e[t[r]]<=i)return null;for(;e[t[r]]<=i;)i-=e[t[r]],u+=t[r];if(0!==i&&0<r){if(n=a(r-1,i),null===n)return l<e[t[r]]?a(r-1,e[t[r]]-i)+t[r]:null;u+=n}return u};if("number"!=typeof r||r===1/0)return null;for(l=3;0<=l;l--)n=r-r%Math.pow(10,l),0!==n&&(r-=n,u+=a(t.length-1,n));return u}),r.convert=(e=>{const t=typeof e;return"number"===t||"string"===t&&/^([\d]+)/g.test(e)?r.write(parseInt(e)):"string"===t?r.read(e):null}),r.check=(e=>u(e)?l().test(e):null),r.contains=((e,r=[])=>{let l;return u(e)?(l=e.match(t()),!!l&&0<l.filter(e=>r.indexOf(e)<0).length):null}),r.extract=((e,r=[])=>{let l;return u(e)&&n(r)?(l=e.match(t()),l||null):null}),r.extractNumerals=((e,t=[])=>{const l=r.extract(e,t);return l?l.map(e=>r.read(e)):null}),r.extractNumbers=(e=>{let t;return u(e)?(t=e.match(/(\d+)/g),t?t.map(e=>r.write(parseInt(e))):null):null}),r.replaceNumerals=((e,l=[])=>u(e)&&n(l)?e.replace(t(),e=>0<=(l.indexOf(e)?e:r.read(e))):null),r.replaceNumbers=((e,t=[])=>u(e)&&n(t)?e.replace(/(\d+)/g,e=>r.write(parseInt(e))):null),r.add=(e=>n(e)?r.write(e.reduce((e,t)=>e+r.read(t),0)||null):null),r.subtract=((e,t)=>(e=r.read(e),t=r.read(t),null!==e&&null!==t?r.write(e-t):null)),r.multiply=(e=>n(e)&&r.write(e.reduce((e,t)=>e*r.read(t),1))||null),r.divide=((e,t)=>(e=r.read(e),t=r.read(t),null!==e&&null!==t?r.write(Math.floor(e/t)):null)),r})();